{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///D:/3rd%20Year/Projects/Project-Xpo/qsa%20-%20Copy/quant-sec-web/src/app/login/page.tsx"],"sourcesContent":["'use client';\nimport { useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport {\n  Box,\n  Button,\n  TextField,\n  Typography,\n  Container,\n  Alert,\n  CircularProgress,\n  Paper,\n  Link as MuiLink,\n} from '@mui/material';\nimport Link from 'next/link';\nimport { ApiClient, UserStorage } from '@/lib/api';\nimport { useAuth } from '@/context/AuthContext';\n\nexport default function LoginPage() {\n  const router = useRouter();\n  const { login } = useAuth();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Form data\n  const [loginInput, setLoginInput] = useState('');\n  const [password, setPassword] = useState('');\n  \n  // Validation\n  const [loginInputError, setLoginInputError] = useState('');\n  const [passwordError, setPasswordError] = useState('');\n\n  const validateForm = (): boolean => {\n    let isValid = true;\n    \n    // Reset errors\n    setLoginInputError('');\n    setPasswordError('');\n    \n    // Validate username\n    if (!loginInput.trim()) {\n      setLoginInputError('Email or Username is required');\n      isValid = false;\n    }\n    \n    // Validate password\n    if (!password) {\n      setPasswordError('Password is required');\n      isValid = false;\n    }\n    \n    return isValid;\n  };\n\n  const handleLogin = async () => {\n    if (!validateForm()) {\n      return;\n    }\n    \n    setLoading(true);\n    setError(null);\n    setLoginInputError('');\n    \n    try {\n      const response = await ApiClient.loginUser(loginInput, password);\n      if (response.Status === 'Positive') {\n        // Build user data object for session\n        const userData = {\n          name: response.name,\n          email: response.email,\n          username: response.username,\n          publicKey: response.public_key,\n          privateKey: response.private_key || '',\n          password: password,\n        };\n        UserStorage.storeUserData(userData);\n        login(userData);\n        router.replace('/dashboard');\n      } else {\n        setError(response.Message || 'User not found or password incorrect.');\n      }\n      \n    } catch (err) {\n      setError('Login failed. Please try again.');\n      console.error('Login error:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter') {\n      handleLogin();\n    }\n  };\n\n  return (\n    <Container maxWidth=\"sm\" sx={{ mt: 4 }}>\n      <Paper sx={{ p: 4 }}>\n        <Typography variant=\"h4\" gutterBottom align=\"center\">\n          Login\n        </Typography>\n        <Typography variant=\"body2\" color=\"text.secondary\" align=\"center\" sx={{ mb: 4 }}>\n          Access your Quantum Secure Email Account\n        </Typography>\n\n        {error && (\n          <Alert severity=\"error\" sx={{ mb: 2 }}>\n            {error}\n          </Alert>\n        )}\n\n        <Box sx={{ mt: 2 }}>\n          <TextField\n            fullWidth\n            label=\"Email or Username\"\n            value={loginInput}\n            onChange={(e) => setLoginInput(e.target.value)}\n            error={!!loginInputError}\n            helperText={loginInputError}\n            margin=\"normal\"\n            disabled={loading}\n            onKeyDown={handleKeyDown}\n          />\n          <TextField\n            fullWidth\n            label=\"Password\"\n            type=\"password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            error={!!passwordError}\n            helperText={passwordError}\n            margin=\"normal\"\n            disabled={loading}\n            onKeyDown={handleKeyDown}\n          />\n        </Box>\n\n        <Box sx={{ mt: 4 }}>\n          <Button\n            fullWidth\n            variant=\"contained\"\n            size=\"large\"\n            onClick={handleLogin}\n            disabled={loading}\n            startIcon={loading ? <CircularProgress size={20} /> : null}\n          >\n            {loading ? 'Logging in...' : 'Login'}\n          </Button>\n        </Box>\n\n        <Box sx={{ mt: 3, textAlign: 'center' }}>\n          <Typography variant=\"body2\" color=\"text.secondary\">\n            Don't have an account?{' '}\n            <Link href=\"/register\" passHref>\n              <MuiLink component=\"span\" sx={{ cursor: 'pointer' }}>\n                Register here\n              </MuiLink>\n            </Link>\n          </Typography>\n        </Box>\n      </Paper>\n    </Container>\n  );\n} "],"names":[],"mappings":"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","debugId":null}}]
}