{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///D:/3rd%20Year/Projects/Project-Xpo/qsa%20-%20Copy/quant-sec-web/src/lib/crypto.ts"],"sourcesContent":["// Crypto utilities for the Quantum Secure Email Client\r\n// Uses Web Crypto API for AES-256, HMAC-SHA256, and scrypt for key derivation\r\n// Uses real Crystal-Kyber via backend API\r\n\r\nimport { UserStorage } from './api';\r\n\r\nexport interface KyberKeyPair {\r\n  publicKey: string; // base64 encoded\r\n  privateKey: string; // base64 encoded\r\n}\r\n\r\nexport interface EncryptedData {\r\n  tag: string; // HMAC-SHA256 hash\r\n  concatenated_string: string; // JSON string with salt, cipher_text, encrypted_passkey, iv (snake_case to match backend)\r\n}\r\n\r\nexport interface AESEncryptedData {\r\n  cipher_text: string; // base64 encoded\r\n  salt: string; // base64 encoded\r\n  iv: string; // base64 encoded IV\r\n}\r\n\r\n// Web Crypto API utilities\r\nexport class CryptoUtils {\r\n  // Generate random bytes\r\n  static async randomBytes(length: number): Promise<Uint8Array> {\r\n    return crypto.getRandomValues(new Uint8Array(length));\r\n  }\r\n\r\n  // Convert ArrayBuffer or Uint8Array to base64\r\n  static arrayBufferToBase64(buffer: ArrayBuffer | Uint8Array): string {\r\n    const bytes = buffer instanceof Uint8Array ? buffer : new Uint8Array(buffer);\r\n    let binary = '';\r\n    for (let i = 0; i < bytes.byteLength; i++) {\r\n      binary += String.fromCharCode(bytes[i]);\r\n    }\r\n    return btoa(binary);\r\n  }\r\n\r\n  // Convert base64 to ArrayBuffer\r\n  static base64ToArrayBuffer(base64: string): ArrayBuffer {\r\n    const binaryString = atob(base64);\r\n    const bytes = new Uint8Array(binaryString.length);\r\n    for (let i = 0; i < binaryString.length; i++) {\r\n      bytes[i] = binaryString.charCodeAt(i);\r\n    }\r\n    return bytes.buffer;\r\n  }\r\n\r\n  // Convert string to ArrayBuffer\r\n  static stringToArrayBuffer(str: string): ArrayBuffer {\r\n    const encoder = new TextEncoder();\r\n    const uint8Array = encoder.encode(str);\r\n    // Create a proper ArrayBuffer copy\r\n    const buffer = new ArrayBuffer(uint8Array.byteLength);\r\n    new Uint8Array(buffer).set(uint8Array);\r\n    return buffer;\r\n  }\r\n\r\n  // Convert ArrayBuffer to string\r\n  static arrayBufferToString(buffer: ArrayBuffer): string {\r\n    const decoder = new TextDecoder();\r\n    return decoder.decode(buffer);\r\n  }\r\n\r\n  // Derive key using scrypt (using scrypt-js library)\r\n  static async deriveKey(password: string, salt: Uint8Array, keyLength: number = 32): Promise<Uint8Array> {\r\n    // Import scrypt-js dynamically\r\n    const { scrypt } = await import('scrypt-js');\r\n    \r\n    const passwordBuffer = this.stringToArrayBuffer(password);\r\n    const derivedKey = await scrypt(\r\n      new Uint8Array(passwordBuffer),\r\n      salt,\r\n      16384, // N = 2^14\r\n      8,     // r = 8\r\n      1,     // p = 1\r\n      keyLength\r\n    );\r\n    \r\n    return derivedKey;\r\n  }\r\n\r\n  // AES-256 encryption using Web Crypto API with secure IV\r\n  static async aesEncrypt(plaintext: string, passkey: string): Promise<AESEncryptedData> {\r\n    const salt = await this.randomBytes(16);\r\n    const iv = await this.randomBytes(16); // ✅ Secure random IV\r\n    const key = await this.deriveKey(passkey, salt);\r\n    \r\n    // Import the key\r\n    const cryptoKey = await crypto.subtle.importKey(\r\n      'raw',\r\n      key,\r\n      { name: 'AES-CBC' },\r\n      false,\r\n      ['encrypt']\r\n    );\r\n\r\n    // Pad the plaintext to 16-byte blocks\r\n    const paddedText = this.pad(plaintext);\r\n    const plaintextBuffer = this.stringToArrayBuffer(paddedText);\r\n    \r\n    // Encrypt\r\n    const encryptedBuffer = await crypto.subtle.encrypt(\r\n      { name: 'AES-CBC', iv },\r\n      cryptoKey,\r\n      plaintextBuffer\r\n    );\r\n\r\n    return {\r\n      cipher_text: this.arrayBufferToBase64(encryptedBuffer),\r\n      salt: this.arrayBufferToBase64(salt),\r\n      iv: this.arrayBufferToBase64(iv) // ✅ Include IV in output\r\n    };\r\n  }\r\n\r\n  // AES-256 decryption using Web Crypto API with IV\r\n  static async aesDecrypt(encryptedData: AESEncryptedData, passkey: string): Promise<string> {\r\n    const salt = new Uint8Array(this.base64ToArrayBuffer(encryptedData.salt));\r\n    const iv = new Uint8Array(this.base64ToArrayBuffer(encryptedData.iv)); // ✅ Use provided IV\r\n    const key = await this.deriveKey(passkey, salt);\r\n    \r\n    // Import the key\r\n    const cryptoKey = await crypto.subtle.importKey(\r\n      'raw',\r\n      key,\r\n      { name: 'AES-CBC' },\r\n      false,\r\n      ['decrypt']\r\n    );\r\n\r\n    const encryptedBuffer = this.base64ToArrayBuffer(encryptedData.cipher_text);\r\n    \r\n    // Decrypt\r\n    const decryptedBuffer = await crypto.subtle.decrypt(\r\n      { name: 'AES-CBC', iv },\r\n      cryptoKey,\r\n      encryptedBuffer\r\n    );\r\n\r\n    const decryptedText = this.arrayBufferToString(decryptedBuffer);\r\n    return this.unpad(decryptedText);\r\n  }\r\n\r\n  // HMAC-SHA256 - ✅ Proper HMAC implementation\r\n  static async hmacSha256(data: string, key: string): Promise<string> {\r\n    const keyBuffer = this.stringToArrayBuffer(key);\r\n    const dataBuffer = this.stringToArrayBuffer(data);\r\n    \r\n    const cryptoKey = await crypto.subtle.importKey(\r\n      'raw',\r\n      keyBuffer,\r\n      { name: 'HMAC', hash: 'SHA-256' },\r\n      false,\r\n      ['sign']\r\n    );\r\n    \r\n    const signature = await crypto.subtle.sign(\r\n      'HMAC',\r\n      cryptoKey,\r\n      dataBuffer\r\n    );\r\n    \r\n    return this.arrayBufferToBase64(signature);\r\n  }\r\n\r\n  // SHA-256 hash\r\n  static async sha256(data: string): Promise<string> {\r\n    const dataBuffer = this.stringToArrayBuffer(data);\r\n    const hashBuffer = await crypto.subtle.digest('SHA-256', dataBuffer);\r\n    return this.arrayBufferToBase64(hashBuffer);\r\n  }\r\n\r\n  // Pad string to 16-byte blocks\r\n  private static pad(s: string): string {\r\n    const blockSize = 16;\r\n    const remainder = s.length % blockSize;\r\n    const paddingNeeded = blockSize - remainder;\r\n    return s + ' '.repeat(paddingNeeded);\r\n  }\r\n\r\n  // Unpad string\r\n  private static unpad(s: string): string {\r\n    return s.trim();\r\n  }\r\n}\r\n\r\n// Real Kyber implementation via backend API\r\nexport class RealKyber {\r\n  private static readonly API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8000/quantserver';\r\n\r\n  // Generate real Kyber keypair via backend\r\n  static async keygen(): Promise<KyberKeyPair> {\r\n    const response = await fetch(`${this.API_BASE_URL}/kyber-keygen`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error('Failed to generate Kyber keypair');\r\n    }\r\n\r\n    const data = await response.json();\r\n    if (data.Status === 'Positive') {\r\n      return {\r\n        publicKey: data.public_key,\r\n        privateKey: data.private_key\r\n      };\r\n    } else {\r\n      throw new Error(data.Message || 'Key generation failed');\r\n    }\r\n  }\r\n\r\n  // Encrypt using real Kyber via backend\r\n  static async encrypt(message: string, receiverPublicKey: string): Promise<EncryptedData> {\r\n    console.log('Encrypt parameters:', { message, receiverPublicKey });\r\n\r\n    const response = await fetch(`${this.API_BASE_URL}/kyber-encrypt`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({\r\n        message,\r\n        receiver_public_key: receiverPublicKey\r\n      }),\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const errorText = await response.text();\r\n      console.error('Encrypt response error:', response.status, errorText);\r\n      throw new Error(`Failed to encrypt message: ${response.status} - ${errorText}`);\r\n    }\r\n\r\n    const data = await response.json();\r\n    console.log('Encrypt response data:', data);\r\n\r\n    if (data.Status === 'Positive') {\r\n      console.log('Encrypted data structure:', data.encrypted_data);\r\n      return data.encrypted_data;\r\n    } else {\r\n      throw new Error(data.Message || 'Encryption failed');\r\n    }\r\n  }\r\n\r\n  // Decrypt using real Kyber via backend\r\n  static async decrypt(tag: string, concatenated_string: string, username: string): Promise<string> {\r\n    // Get the user's private key from localStorage\r\n    const userData = UserStorage.getUserData();\r\n    if (!userData || !userData.privateKey) {\r\n      throw new Error('User private key not found. Please log in again.');\r\n    }\r\n\r\n    console.log('Decrypt parameters:', { tag, concatenated_string, username, hasPrivateKey: !!userData.privateKey });\r\n\r\n    const requestBody = {\r\n      tag,\r\n      concatenated_string: concatenated_string,\r\n      username,\r\n      private_key: userData.privateKey\r\n    };\r\n\r\n    console.log('Request body:', requestBody);\r\n\r\n    const response = await fetch(`${this.API_BASE_URL}/kyber-decrypt`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(requestBody),\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const errorText = await response.text();\r\n      console.error('Response error:', response.status, errorText);\r\n      throw new Error(`Failed to decrypt message: ${response.status} - ${errorText}`);\r\n    }\r\n\r\n    const data = await response.json();\r\n    console.log('Response data:', data);\r\n\r\n    if (data.Status === 'Positive') {\r\n      return data.decrypted_message;\r\n    } else {\r\n      throw new Error(data.Message || 'Decryption failed');\r\n    }\r\n  }\r\n}\r\n\r\n// Main encryption function using real Kyber\r\nexport async function encrypt(message: string, receiverKyberPublicKey: string): Promise<EncryptedData> {\r\n  return await RealKyber.encrypt(message, receiverKyberPublicKey);\r\n}\r\n\r\n// Main decryption function using real Kyber\r\nexport async function decrypt(\r\n  tag: string, \r\n  concatenated_string: string, \r\n  username: string\r\n): Promise<string> {\r\n  return await RealKyber.decrypt(tag, concatenated_string, username);\r\n} "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 249, "column": 0}, "map": {"version":3,"sources":["file:///D:/3rd%20Year/Projects/Project-Xpo/qsa%20-%20Copy/quant-sec-web/src/app/inbox/page.tsx"],"sourcesContent":["'use client';\nimport { useState, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport {\n  Box,\n  Button,\n  Typography,\n  Container,\n  Alert,\n  Paper,\n  List,\n  ListItem,\n  ListItemAvatar,\n  Avatar,\n  Chip,\n  Divider,\n  CircularProgress,\n  IconButton,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n} from '@mui/material';\nimport Refresh from '@mui/icons-material/Refresh';\nimport Delete from '@mui/icons-material/Delete';\nimport Visibility from '@mui/icons-material/Visibility';\nimport VisibilityOff from '@mui/icons-material/VisibilityOff';\nimport Warning from '@mui/icons-material/Warning';\nimport CheckCircle from '@mui/icons-material/CheckCircle';\nimport ErrorIcon from '@mui/icons-material/Error';\nimport { UserStorage, ApiClient, Email } from '@/lib/api';\nimport { decrypt } from '@/lib/crypto';\n\ninterface DecryptedEmail {\n  id: string;\n  sender: string;\n  sender_email?: string;\n  sender_name?: string;\n  subject: string;\n  body: string;\n  datetime: string;\n  macVerified: boolean;\n  macError?: string;\n}\n\nexport default function InboxPage() {\n  const router = useRouter();\n  const [userData, setUserData] = useState<any>(null);\n  const [emails, setEmails] = useState<DecryptedEmail[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [selectedEmail, setSelectedEmail] = useState<DecryptedEmail | null>(null);\n  const [showBody, setShowBody] = useState<{ [key: string]: boolean }>({});\n\n  useEffect(() => {\n    const data = UserStorage.getUserData();\n    if (!data) {\n      router.push('/login');\n      return;\n    }\n    setUserData(data);\n    fetchEmails(data);\n  }, [router]);\n\n  const fetchEmails = async (user: any) => {\n    setLoading(true);\n    setError(null);\n    \n    try {\n      const encryptedEmails = await ApiClient.getInbox(user.username, user.password);\n      const decryptedEmails: DecryptedEmail[] = [];\n      \n      for (const [index, email] of encryptedEmails.entries()) {\n        try {\n          // Parse the encrypted data\n          const encryptedSubject = JSON.parse(email.encrypted_subject);\n          const encryptedBody = JSON.parse(email.encrypted_body);\n          \n          // Decrypt subject and body using real Kyber\n          const decryptedSubject = await decrypt(\n            encryptedSubject.tag,\n            encryptedSubject.concatenated_string,\n            user.username\n          );\n          \n          const decryptedBody = await decrypt(\n            encryptedBody.tag,\n            encryptedBody.concatenated_string,\n            user.username\n          );\n          \n          decryptedEmails.push({\n            id: `${email.sender}-${email.datetime_of_arrival}-${index}`,\n            sender: email.sender,\n            sender_email: email.sender_email,\n            sender_name: email.sender_name,\n            subject: decryptedSubject,\n            body: decryptedBody,\n            datetime: email.datetime_of_arrival,\n            macVerified: true\n          });\n          \n        } catch (decryptError) {\n          console.error('Decryption error for email:', email, 'Error:', decryptError);\n          // If decryption fails, add email with error flag\n          decryptedEmails.push({\n            id: `error-${email.sender}-${email.datetime_of_arrival}-${index}`,\n            sender: email.sender,\n            sender_email: email.sender_email,\n            sender_name: email.sender_name,\n            subject: '[DECRYPTION FAILED]',\n            body: `This message could not be decrypted. Error: ${decryptError instanceof Error ? decryptError.message : 'Unknown error'}`,\n            datetime: email.datetime_of_arrival,\n            macVerified: false,\n            macError: decryptError instanceof Error ? decryptError.message : 'Unknown error'\n          });\n        }\n      }\n      \n      setEmails(decryptedEmails);\n      \n    } catch (err) {\n      setError('Failed to fetch emails. Please try again.');\n      console.error('Fetch emails error:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleRefresh = () => {\n    if (userData) {\n      fetchEmails(userData);\n    }\n  };\n\n  const handleClearInbox = async () => {\n    if (!userData) return;\n    \n    setLoading(true);\n    try {\n      const success = await ApiClient.clearInbox(userData.username, userData.password);\n      if (success) {\n        setEmails([]);\n      } else {\n        setError('Failed to clear inbox.');\n      }\n    } catch (err) {\n      setError('Failed to clear inbox.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleViewEmail = (email: DecryptedEmail) => {\n    setSelectedEmail(email);\n  };\n\n  const toggleShowBody = (emailId: string) => {\n    setShowBody(prev => ({\n      ...prev,\n      [emailId]: !prev[emailId]\n    }));\n  };\n\n  const formatDateTime = (dateTimeStr: string) => {\n    try {\n      const date = new Date(dateTimeStr);\n      return date.toLocaleString();\n    } catch {\n      return dateTimeStr;\n    }\n  };\n\n  if (!userData) {\n    return (\n      <Container maxWidth=\"md\" sx={{ mt: 4 }}>\n        <Typography>Loading...</Typography>\n      </Container>\n    );\n  }\n\n  return (\n    <Container maxWidth=\"md\" sx={{ mt: 4 }}>\n      <Paper sx={{ p: 4 }}>\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 3 }}>\n          <Typography variant=\"h4\">\n            Inbox\n          </Typography>\n          <Box sx={{ display: 'flex', gap: 1 }}>\n            <Button\n              variant=\"outlined\"\n              startIcon={<Refresh />}\n              onClick={handleRefresh}\n              disabled={loading}\n            >\n              Refresh\n            </Button>\n            <Button\n              variant=\"outlined\"\n              color=\"error\"\n              startIcon={<Delete />}\n              onClick={handleClearInbox}\n              disabled={loading}\n            >\n              Clear All\n            </Button>\n          </Box>\n        </Box>\n\n        {error && (\n          <Alert severity=\"error\" sx={{ mb: 2 }}>\n            {error}\n          </Alert>\n        )}\n\n        {loading && (\n          <Box sx={{ display: 'flex', justifyContent: 'center', my: 4 }}>\n            <CircularProgress />\n          </Box>\n        )}\n\n        {!loading && emails.length === 0 && (\n          <Box sx={{ textAlign: 'center', py: 4 }}>\n            <Typography variant=\"h6\" color=\"text.secondary\">\n              No messages in your inbox\n            </Typography>\n            <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 1 }}>\n              Messages will appear here once you receive encrypted emails from other users.\n            </Typography>\n          </Box>\n        )}\n\n        {!loading && emails.length > 0 && (\n          <List>\n            {emails.map((email, index) => (\n              <Box key={email.id}>\n                <ListItem alignItems=\"flex-start\">\n                  <ListItemAvatar>\n                    <Avatar>\n                      {email.sender.charAt(0).toUpperCase()}\n                    </Avatar>\n                  </ListItemAvatar>\n                  <Box sx={{ flex: 1, minWidth: 0 }}>\n                    {/* Primary content */}\n                    <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 1 }}>\n                      <Typography variant=\"subtitle1\" component=\"h3\">\n                        {email.subject}\n                      </Typography>\n                      {email.macVerified ? (\n                        <CheckCircle color=\"success\" fontSize=\"small\" />\n                      ) : (\n                        <ErrorIcon color=\"error\" fontSize=\"small\" />\n                      )}\n                    </Box>\n                    \n                    {/* Secondary content */}\n                    <Box>\n                      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ display: 'block' }}>\n                        From: {email.sender_name ? `${email.sender_name} <${email.sender_email}>` : email.sender_email || email.sender}\n                      </Typography>\n                      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ display: 'block' }}>\n                        {formatDateTime(email.datetime)}\n                      </Typography>\n                      {!email.macVerified && (\n                        <Box sx={{ mt: 1 }}>\n                          <Chip\n                            icon={<Warning />}\n                            label=\"MAC Verification Failed\"\n                            color=\"error\"\n                            size=\"small\"\n                          />\n                        </Box>\n                      )}\n                      {showBody[email.id] && (\n                        <Typography variant=\"body2\" sx={{ mt: 2, whiteSpace: 'pre-wrap' }}>\n                          {email.body}\n                        </Typography>\n                      )}\n                    </Box>\n                  </Box>\n                  <Box sx={{ display: 'flex', gap: 1 }}>\n                    <IconButton\n                      onClick={() => toggleShowBody(email.id)}\n                      size=\"small\"\n                    >\n                      {showBody[email.id] ? <VisibilityOff /> : <Visibility />}\n                    </IconButton>\n                    <Button\n                      size=\"small\"\n                      onClick={() => handleViewEmail(email)}\n                    >\n                      View\n                    </Button>\n                  </Box>\n                </ListItem>\n                {index < emails.length - 1 && <Divider variant=\"inset\" component=\"li\" />}\n              </Box>\n            ))}\n          </List>\n        )}\n      </Paper>\n\n      {/* Email Detail Dialog */}\n      <Dialog\n        open={!!selectedEmail}\n        onClose={() => setSelectedEmail(null)}\n        maxWidth=\"md\"\n        fullWidth\n      >\n        {selectedEmail && (\n          <>\n            <DialogTitle>\n              <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                {selectedEmail.subject}\n                {selectedEmail.macVerified ? (\n                  <CheckCircle color=\"success\" />\n                ) : (\n                  <ErrorIcon color=\"error\" />\n                )}\n              </Box>\n            </DialogTitle>\n            <DialogContent>\n              <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\n                From: {selectedEmail.sender_name ? `${selectedEmail.sender_name} <${selectedEmail.sender_email}>` : selectedEmail.sender_email || selectedEmail.sender}\n              </Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n                {formatDateTime(selectedEmail.datetime)}\n              </Typography>\n              {!selectedEmail.macVerified && (\n                <Alert severity=\"warning\" sx={{ mb: 2 }}>\n                  <Typography variant=\"body2\">\n                    <strong>Warning:</strong> This message failed MAC verification. \n                    It may have been tampered with or the sender's key has changed.\n                  </Typography>\n                  {selectedEmail.macError && (\n                    <Typography variant=\"caption\" sx={{ mt: 1, display: 'block' }}>\n                      Error: {selectedEmail.macError}\n                    </Typography>\n                  )}\n                </Alert>\n              )}\n              <Typography variant=\"body1\" sx={{ whiteSpace: 'pre-wrap' }}>\n                {selectedEmail.body}\n              </Typography>\n            </DialogContent>\n            <DialogActions>\n              <Button onClick={() => setSelectedEmail(null)}>\n                Close\n              </Button>\n            </DialogActions>\n          </>\n        )}\n      </Dialog>\n    </Container>\n  );\n} "],"names":[],"mappings":"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","debugId":null}}]
}